<p class="text-center fs-4 fw-bold">ğŸ¡ Liste des RÃ©sidences</p>

<!-- Barre de recherche -->
<div class="mb-3">
  <input type="text" class="form-control" [(ngModel)]="searchTerm" placeholder="ğŸ” Rechercher par adresse..." />
</div>

<!-- Liste des rÃ©sidences sous forme de cartes -->
<div class="row">
  <div class="col-md-4 mb-4" *ngFor="let r of filteredResidences">
    <div class="card shadow-sm">
      <img [src]="r.image" alt="{{ r.name }}" class="card-img-top residence-image">
      <div class="card-body">
        <h5 class="card-title">{{ r.name }}</h5>

        <!-- Statut avec badge colorÃ© -->
        <span class="badge" [ngClass]="{
          'bg-success': r.status === 'Disponible',
          'bg-danger': r.status === 'Vendu',
          'bg-warning text-dark': r.status === 'En Construction'
        }">
          <ng-container *ngIf="r.status === 'Disponible'">âœ”ï¸ Disponible</ng-container>
          <ng-container *ngIf="r.status === 'Vendu'">âŒ Vendu</ng-container>
          <ng-container *ngIf="r.status === 'En Construction'">ğŸš§ En Construction</ng-container>
        </span>

        <div class="mt-3">
          <!-- Bouton pour afficher l'adresse -->
          <button class="btn btn-outline-primary btn-sm" (click)="toggleLocation(r.id)">
            ğŸ“ Show Location
          </button>
          <p *ngIf="showLocation[r.id]" class="text-muted mt-2">ğŸ“Œ {{ r.address }}</p>
        </div>

        <div class="mt-3">
          <!-- Bouton "Like" -->
          <button class="btn btn-outline-danger btn-sm" (click)="addToFavorites(r)" *ngIf="!isFavorite(r)">
            â¤ï¸ Like
          </button>
          <button class="btn btn-danger btn-sm" (click)="removeFromFavorites(r)" *ngIf="isFavorite(r)">
            ğŸ’” Unlike
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Liste des favoris -->
<h3 class="mt-5 text-center">â­ Favoris</h3>
<table class="table table-bordered">
  <thead>
    <tr class="table-dark">
      <th>ğŸ  Nom</th>
      <th>ğŸ“ Adresse</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let fav of favorites">
      <td>{{ fav.name }}</td>
      <td>{{ fav.address }}</td>
    </tr>
  </tbody>
</table>